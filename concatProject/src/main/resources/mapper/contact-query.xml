<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <entry key="deletecontact">
        DELETE FROM tbl_contact
        WHERE phonenumber = ?, user_code = ?
    </entry>

    <entry key="insertcontact">
        INSERT INTO tbl_contact(
        contact_name,
        phonenumber,
        email,
        address,
        birthday,
        user_code
        )VALUES(
        ?,
        ?,
        ?,
        ?,
        ?,
        ?
        )
    </entry>

    <entry key="updatecontact">
        UPDATE tbl_contact
        SET contact_name = ? , phonenumber = ? , email = ?, address = ?, birthday = ?, user_code = ?
        WHERE phonenumber = ?
    </entry>


    <entry key = "findPhoneNumber">

        SELECT
        contact_code,
        contact_name,
        phonenumber,
        birthday,
        G.groupname
        FROM tbl_contact C
        JOIN tbl_group G ON C.groupnumber = G.groupnumber;

    </entry>

    <entry key="countAllContact">
        SELECT count(*)
        FROM tbl_contact
        where user_code =?
    </entry>

    <entry key="groupCount">
        SELECT groupname,count(*)
        From tbl_contact a JOIN tbl_group b
        on a.groupnumber = b.groupnumber
        where user_code =?
        group by groupname
    </entry>

    <entry key="selectLastContact">
        SELECT contact_code,contact_name,phonenumber,email,address,birthday,groupnumber,user_code
        FROM tbl_contact
        where user_code =?
        order by contact_code DESC
        Limit 1
    </entry>


    <entry key = "findGroup">
        SELECT
        contact_code,
        contact_name,
        phonenumber,
        birthday,
        G.groupname
        FROM tbl_contact C
        JOIN tbl_group G ON C.groupnumber = G.groupnumber
        WHERE G.groupname = ?


    </entry>
    
    <entry key="searchByName">
        SELECT * FROM tbl_contact
        WHERE contact_name LIKE ? AND user_code = ?
        ORDER BY contact_name;
    </entry>

    <entry key="searchByPhoneNumber">
        SELECT * FROM tbl_contact
        WHERE phonenumber LIKE ? AND user_code = ?
        ORDER BY phonenumber;
    </entry>

    <entry key="searchByAddress">
        SELECT * FROM tbl_contact
        WHERE adress LIKE ? AND user_code = ?
        ORDER BY adress;
    </entry>

    <entry key="searchByEmail">
        SELECT * FROM tbl_contact
        WHERE email LIKE ? AND user_code = ?
        ORDER BY email;
    </entry>
    
    <entry key="getUserInfo">
        SELECT * FROM tbl_user
        WHERE id = ? AND pwd = ?;
    </entry>

    <entry key="setNewUser">
        INSERT INTO tbl_user
        (user_name, id, pwd)
        VALUES(?, ?, ?);
    </entry>

    <entry key = "insertGroup">


        INSERT INTO tbl_group VALUES (NULL, ?, ?);


    </entry>

    <entry key = "deleteGroup">

        DELETE FROM tbl_group WHERE Groupname = ? AND user_code = ?;


    </entry>

    <entry key="savePrefer">
        UPDATE tbl_user
        SET prefer = ?
        WHERE user_code = ?;
    </entry>

    <entry key="printGroupList">
        SELECT * FROM tbl_group
        WHERE user_code = ?;
    </entry>

    <entry key="printContactList">
        SELECT * FROM tbl_contact
        WHERE user_code = ?;
    </entry>

    <entry key="changeGroupNumber">
        UPDATE tbl_contact SET groupnumber = ?
        WHERE user_code = ? AND phonenumber = ?;
    </entry>

    <entry key="updatefordeletegroup">
        UPDATE tbl_contact a
        INNER JOIN tbl_group b
        ON a.groupnumber = b.groupnumber
        SET a.groupnumber = null
        WHERE b.groupname = ? AND a.user_code = ? ;

    </entry>

</properties>